<?xml version="1.0" encoding="UTF-8"?>
<web-fragment xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
	http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
	version="2.4">
	<display-name>cap-bm</display-name>
	<description>cap-bm</description>
	<!-- Cap登录过滤器 正式环境中请注释或者将enabled改成false-->
    <filter>
		<filter-name>capSessionFilter</filter-name>
		<filter-class>
			com.comtop.cap.ptc.login.filter.CapSessionFilter
		</filter-class>
		<init-param>
			<param-name>freePages</param-name>
			<param-value>
			MainFrame.jsp;TrackDWR.handleTrack.dwr;PlatFormAction.do;CapLogin.ac;CapInitLogin.ac;certificate.ac;ssoLogin.ac;login.ac;initLogin.ac;pcasLogin.ac;Default.jsp;CapReLogin.jsp;PasswordFind.jsp;CheckAccount.jsp;LoginAction.js;FindByEmail.jsp;web/;ContactPerson.jsp;FindPasswordAction.validateAccount.dwr;FindPasswordAction.validatePassword.dwr;FindPasswordAction.validateQuestion.dwr;FindPasswordAction.getQuestion.dwr;FindPasswordAction.getQuestion.dwr;FindPasswordAction.isAnswerCorrect.dwr;FindPasswordAction.getConfigValue.dwr;FindPasswordAction.resetPassword.dwr;FindPasswordAction.validateEmail.dwr;FindPasswordAction.isValidateLink.dwr;FindPasswordAction.sendEmail.dwr;ResetPasswordByEmail.jsp;FindPasswordAction.isEmailCorrect.dwr;ContactPersonShow.jsp;ContactPersonAction.getContactPersonList.dwr;ContactPersonAction.getContactPersonShow.dwr;OnlineUser.jsp;TestWebSpeed.jsp;checkWebSpeed.ac;TestWebSpeed.jsp;ssoDMLoginAction.ac;filter4ASSO.ac
			</param-value>
		</init-param>
		<init-param>
			<param-name>regexFreePages</param-name>
			<param-value>
			.*?\.jpg(\?.*?)??;.*?\.gif(\?.*?)??;.*?\.png(\?.*?)??;.*?\.ico(\?.*?)??;.*?\.js(\?.*?)??;.*?\.css(\?.*?)??;.*/cap/dwr/.*;.*/cap/rt/.*;.*/workbench/component/.*;.*/bpms/.*;.*/workbench/base/.*;.*/login/.*;.*/top/component/.*;.*/top/js/.*;.*/cxf/.*;.*/soa/.*;.*/CapReLogin.jsp.*;.*/filter4ASSO.*;.*/authroute.*;.*/signout.*;.*/initLogin4A.*;.*/interface4ASSO.*;.*/graph/.*
			</param-value>
		</init-param>
		<init-param>
			<param-name>mainFrameName</param-name>
			<param-value>mainFrame;fram_work_Main</param-value>
		</init-param>
		<init-param>
			<param-name>enabled</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>capSessionFilter</filter-name>
		<url-pattern>/CapInitLogin.ac</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>capSessionFilter</filter-name>
		<url-pattern>/cap/*</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>capSessionFilter</filter-name>
		<url-pattern>/cap</url-pattern>
	</filter-mapping>
	<!-- Cap登录过滤器  end 正式环境中请注释 或者将enabled改成false-->
	 <filter>
		<filter-name>capBmReloadFilter</filter-name>
		<filter-class>
			com.comtop.cap.bm.webapp.core.CapBmReloadFilter
		</filter-class>
	</filter>
	<servlet>
		<servlet-name>PdmExport</servlet-name>
		<servlet-class>com.comtop.cap.bm.metadata.pdm.facade.PdmExportServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>PdmExport</servlet-name>
		<url-pattern>*.pdmExport</url-pattern>
	</servlet-mapping>
	<servlet>
		<servlet-name>PdmImport</servlet-name>
		<servlet-class>com.comtop.cap.bm.metadata.pdm.facade.PdmImportServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>PdmImport</servlet-name>
		<url-pattern>*.pdmImport</url-pattern>
	</servlet-mapping>
	<servlet>
		<servlet-name>dwr_invoker</servlet-name>
		<servlet-class>com.comtop.top.component.common.systeminit.DwrExtServlet</servlet-class>
       <init-param> 
      		<param-name>config-cap-bm-dwr</param-name> 
      		<param-value>WEB-INF/cap_bm_dwr.xml</param-value> 
       </init-param>
       <init-param> 
      		<param-name>comtop.org.directwebremoting.dwrp.FileUpload</param-name> 
      		<param-value>com.comtop.cap.runtime.dwr.CapFileUpload</param-value> 
       </init-param>
	</servlet>
</web-fragment>